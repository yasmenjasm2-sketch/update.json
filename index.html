<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ | Ù†Ø¸Ø§Ù… Ù…Ø­Ù…ÙŠ</title>
    <style>
        /* Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ ÙˆÙ†Ø³Ø®Ù‡ Ù„Ù„Ø­Ù…Ø§ÙŠØ© */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); 
            color: white; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            user-select: none; 
            -webkit-user-select: none;
        }
        .login-card { background: rgba(30, 30, 30, 0.9); padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.8); width: 320px; text-align: center; border: 1px solid #444; position: relative; overflow: hidden; }
        .login-card::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(to bottom right, rgba(255,255,255,0.1), rgba(255,255,255,0)); transform: rotate(45deg); pointer-events: none; }
        
        /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙÙ‚Ø· Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„Ù„ØµÙ‚ */
        input { width: 100%; padding: 12px; margin: 15px 0; border-radius: 8px; border: 1px solid #555; background: #222; color: #00e676; box-sizing: border-box; text-align: center; font-family: monospace; font-size: 16px; font-weight: bold; letter-spacing: 1px; user-select: text; -webkit-user-select: text; }
        input:focus { outline: none; border-color: #00e676; box-shadow: 0 0 8px rgba(0, 230, 118, 0.5); }
        button { width: 100%; padding: 12px; background: #00e676; border: none; border-radius: 8px; color: #000; font-weight: bold; cursor: pointer; transition: 0.3s; font-size: 16px; margin-bottom: 10px; }
        button:hover { background: #00c853; box-shadow: 0 0 15px #00e676; transform: scale(1.02); }
        .whatsapp-btn { background: #25D366; color: white; text-decoration: none; display: block; padding: 12px; border-radius: 8px; font-weight: bold; font-size: 14px; transition: 0.3s; margin-top: 10px; }
        .whatsapp-btn:hover { background: #128C7E; box-shadow: 0 0 15px #25D366; transform: scale(1.02); }
        .error { color: #ff5252; font-size: 14px; margin-top: 10px; display: none; border: 1px solid #ff5252; padding: 8px; border-radius: 5px; background: rgba(255, 82, 82, 0.1); font-weight: bold; animation: shake 0.3s ease-in-out; }
        .device-info { font-size: 11px; color: #aaa; margin-top: 15px; font-family: monospace; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 5px; }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
    </style>
</head>
<body>

<div class="login-card" id="mainCard">
    <h2>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</h2>
    <p style="font-size: 13px; color: #ccc;">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
    
    <input type="text" id="subCode" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§" autocomplete="off">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†</button>
    
    <a href="https://wsend.co/905424678123" class="whatsapp-btn" target="_blank">ğŸ’¬ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ / Ø´Ø±Ø§Ø¡ Ø§Ø´ØªØ±Ø§Ùƒ</a>
    
    <div id="error" class="error"></div>
    
    <div class="device-info" id="deviceDisplay">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø¨ØµÙ…Ø© Ø§Ù„Ù‡Ø§ØªÙ...</div>
</div>

<script>
    // ==========================================
    // ğŸ›¡ï¸ Ø·Ø¨Ù‚Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù„ØµÙØ­Ø© Ø§Ù„ÙˆÙŠØ¨
    // ==========================================
    document.addEventListener('contextmenu', event => {
        if (event.target.tagName !== 'INPUT') event.preventDefault();
    });
    document.onkeydown = function(e) {
        if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || (e.ctrlKey && e.keyCode === 85)) return false;
    };

    // ==========================================
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©
    // ==========================================
    const REQUIRED_APP_VERSION = "3.0.1"; 
    const DEVELOPER_LINK = "https://wsend.co/905424678123";

    const urlParams = new URLSearchParams(window.location.search);
    const appDeviceId = urlParams.get('device_id') || "UNKNOWN";
    const checkCode = urlParams.get('check_code') || "";
    document.getElementById('deviceDisplay').innerText = "Ø¨ØµÙ…Ø© Ø¬Ù‡Ø§Ø²Ùƒ: " + appDeviceId;

    // ==========================================
    // ğŸ“¦ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ (ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ø¨Øª)
    // ==========================================
    const subscriptionCodes = {
        "WEEK-1111": { duration: "7days", status: 1, deviceId: "" },
        "MONTH-HACK": { duration: "30days", status: 2, deviceId: "" }, // Ù…Ø­Ø¸ÙˆØ±
        "TEST-20SEC": { duration: "20seconds", status: 1, deviceId: "b2c8cdd53aba1104" }, // ØªØ¬Ø±Ø¨Ø© 20 Ø«Ø§Ù†ÙŠØ©
        "SUB-HOUR": { duration: "1hour", status: 1, deviceId: "" },
        "SUB-DAY": { duration: "1day", status: 1, deviceId: "" },
        "SUB-MONTH": { duration: "30days", status: 1, deviceId: "" },
        "VIP-FUTURE": { duration: "lifetime", status: 1, deviceId: "" }
    };

    // ==========================================
    // âš™ï¸ Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù†ØµÙŠØ© Ø¥Ù„Ù‰ ÙˆÙ‚Øª ÙØ¹Ù„ÙŠ (Ù…Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)
    // ==========================================
    function getDurationMs(durationStr) {
        let num = parseInt(durationStr);
        if (durationStr.includes('second')) return num * 1000;
        if (durationStr.includes('hour')) return num * 60 * 60 * 1000;
        if (durationStr.includes('day')) return num * 24 * 60 * 60 * 1000;
        if (durationStr.includes('lifetime')) return 9999999999999; 
        return 0;
    }

    // ==========================================
    // Ø£ÙˆØ§Ù…Ø± Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    // ==========================================
    window.onload = function() {
        setTimeout(function() {
            window.location.href = "app://check_update?req_ver=" + REQUIRED_APP_VERSION + "&link=" + encodeURIComponent(DEVELOPER_LINK);
        }, 300);

        if (checkCode !== "") {
            if (subscriptionCodes[checkCode] && subscriptionCodes[checkCode].status === 2) {
                setTimeout(function() { window.location.href = "app://ban_user?link=" + encodeURIComponent(DEVELOPER_LINK); }, 600);
            }
        } 
        // ÙØ­Øµ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ù„Ù„Ø¬Ù‡Ø§Ø²
        else if (checkCode === "" && appDeviceId !== "UNKNOWN") {
            for (const [codeKey, data] of Object.entries(subscriptionCodes)) {
                let savedExpiry = localStorage.getItem('exp_' + codeKey);
                let savedDevice = localStorage.getItem('dev_' + codeKey);
                
                if (savedExpiry && savedDevice === appDeviceId && data.status === 1) {
                    let expiryMs = parseInt(savedExpiry);
                    if (expiryMs > Date.now()) { // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ø§ ÙŠØ²Ø§Ù„ Ø³Ø§Ø±ÙŠØ§Ù‹
                        document.getElementById('mainCard').innerHTML = `
                            <h2 style='color:#00e676;'>Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ø´ØªØ±Ø§ÙƒÙƒ... ğŸ”„</h2>
                            <p style='color:#ccc;font-size:14px;'>ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²ÙƒØŒ Ø§Ù†ØªØ¸Ø± Ù„Ø­Ø¸Ø©</p>
                            <div style="margin-top:20px; width:40px; height:40px; border:4px solid #00e676; border-top:4px solid transparent; border-radius:50%; animation: spin 1s linear infinite; margin-left:auto; margin-right:auto;"></div>
                            <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
                        `;
                        setTimeout(function() {
                            window.location.href = `app://restore_sub?code=${encodeURIComponent(codeKey)}&expiry_time=${expiryMs}`;
                        }, 2000);
                        return;
                    }
                }
            }
        }
    };

    // ==========================================
    // ğŸ” Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    // ==========================================
    function login() {
        const subCode = document.getElementById('subCode').value.trim();
        const codeData = subscriptionCodes[subCode];
        const errorDiv = document.getElementById('error');

        if (codeData) {
            // 1. ÙØ­Øµ Ø§Ù„Ø­Ø¸Ø±
            if (codeData.status === 2) {
                errorDiv.innerText = "ØªÙ… Ø­Ø¸Ø± Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø·ÙˆØ±!";
                errorDiv.style.display = 'block';
                return;
            } 

            // 2. ÙØ­Øµ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© (Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯Ø§Ø¯)
            let savedExpiry = localStorage.getItem('exp_' + subCode);
            let savedDevice = localStorage.getItem('dev_' + subCode);

            if (savedExpiry) {
                // Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª
                if (Date.now() > parseInt(savedExpiry)) {
                    errorDiv.innerText = "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙˆØ§Ù†ØªÙ‡Øª Ù…Ø¯ØªÙ‡!";
                    errorDiv.style.display = 'block';
                    return; // Ø·Ø±Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
                }
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¥Ø°Ø§ Ø­Ø§ÙˆÙ„ Ù†Ù‚Ù„Ù‡ Ù„Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±
                if (savedDevice && savedDevice !== appDeviceId && savedDevice !== "UNKNOWN") {
                    errorDiv.innerText = "â›” Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø¢Ø®Ø±!";
                    errorDiv.style.display = 'block';
                    return;
                }
            } else {
                // Ø£ÙˆÙ„ Ù…Ø±Ø© ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯! (Ù‡Ù†Ø§ ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¹Ø¯Ø§Ø¯)
                let durationMs = getDurationMs(codeData.duration);
                let newExpiry = Date.now() + durationMs;
                localStorage.setItem('exp_' + subCode, newExpiry); // Ø­ÙØ¸ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø²
                localStorage.setItem('dev_' + subCode, appDeviceId); // Ø±Ø¨Ø· Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            }

            // 3. Ù†Ø¬Ø§Ø­ Ø§Ù„ØªÙØ¹ÙŠÙ„
            if (codeData.status === 1) {
                errorDiv.style.display = 'none';
                window.location.href = `https://dummy_success_auth_${codeData.duration}?code=${subCode}`;
                
                const btn = document.querySelector('button');
                btn.innerText = "ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ âœ…";
                btn.style.background = "#fff";
            }
        } else {
            errorDiv.innerText = "Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!";
            errorDiv.style.display = 'block';
        }
    }
</script>

</body>
</html>
